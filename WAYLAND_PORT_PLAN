;; Wayland port parity plan in Lisp form
;; Meta: increment :write-count on every edit; keep Lisp structure; mark :status and :notes as we align parity.
;; Meta: authored/maintained by Codex.
(defparameter *wayland-port-plane*
  '(:meta (:author "Codex"
           :write-count 1
           :purpose "Track HackMatrix window manager/controls features not yet present in the Wayland port."
           :editing-instructions "Increment :write-count on edit; keep IDs stable; update :status (:missing|:done|:wip) and :notes when addressed.")
    :infra-notes ("Many features depend on X11-specific behaviors (XFixes shaping, window IDs, WM hints); when porting, prefer wlroots equivalents (input regions, xdg_toplevel state, pointer constraints)."
                  "Hotkey plumbing in Wayland should route through seat/keymap and compositor focus rules; avoid global grabs."
                  "Animation/deferred actions should use main-thread queues (already added) instead of ad-hoc mutexes.")
    :features (
      (:id 1  :desc "Menu launcher (V key) spawning external menu program" :status :missing)
      (:id 2  :desc "Block count logging (B key) via texturePack->logCounts()" :status :missing)
      (:id 3  :desc "Block type logging (T key) action" :status :missing)
      (:id 4  :desc "Manual mesh trigger (comma key) world->mesh()" :status :missing)
      (:id 5  :desc "Toggle meshing (M key) world->mesh(false)" :status :missing)
      (:id 6  :desc "Wireframe toggle (slash key) renderer->toggleWireframe()" :status :missing)
      (:id 7  :desc "Selection action (E key placeholder) world selection hooks" :status :missing)
      (:id 8  :desc "Code block open (period key) with camera move-to + OPEN_SELECTION_CODE" :status :missing)
      (:id 9  :desc "Save world (L key) timed filename under saves/" :status :missing)
      (:id 10 :desc "Screenshot hotkey from controlMappings entry" :status :missing)
      (:id 11 :desc "Mouse left-click places voxel OR focuses looked-at app" :status :missing)
      (:id 12 :desc "Mouse right-click remove cube (placeholder)" :status :missing)
      (:id 13 :desc "Camera translate force via WASD integration" :status :missing)
      (:id 14 :desc "Quit key mapping (controlMappings 'quit')" :status :missing)
      (:id 15 :desc "Mod-Escape handling (Delete throws errorEscape)" :status :missing)
      (:id 16 :desc "Window flop timing adjust via 0/9 keys" :status :missing)
      (:id 17 :desc "Player speed adjustments (+/- and Shift+0 reset)" :status :missing)
      (:id 18 :desc "Cursor toggle key (toggle_cursor mapping) switching grab/pass-through" :status :missing)
      (:id 19 :desc "App select toggle (T key in handleSelectApp)" :status :missing)
      (:id 20 :desc "Defered action runner (Controls::doAfter/doDeferedActions) for camera moves" :status :missing)
      (:id 21 :desc "goToApp animation aligning camera to app pose with windowFlop timing" :status :missing)
      (:id 22 :desc "Focus looked-at app on R key (handleToggleApp)" :status :missing)
      (:id 23 :desc "Window manager menu hotkey integration with controls->menu()" :status :missing)
      (:id 24 :desc "Bootable app discovery and registration on startup" :status :missing)
      (:id 25 :desc "appsWithHotKeys vector and Super+1..9 focus cycling" :status :missing)
      (:id 26 :desc "Super+Shift+number swaps hotkeys between apps" :status :missing)
      (:id 27 :desc "Super+0 camera reset moveTo(3,5,16)" :status :missing)
      (:id 28 :desc "Unfocus app via Super+E" :status :missing)
      (:id 29 :desc "Close focused app via Super+Q" :status :missing)
      (:id 30 :desc "Window resize hotkeys Super+= / Super-- queuing LARGER/SMALLER events" :status :missing)
      (:id 31 :desc "Event queue drained in WM::tick applying app->larger()/smaller()" :status :missing)
      (:id 32 :desc "Dynamic map/unmap/destroy listeners queuing add/remove under mutex" :status :missing)
      (:id 33 :desc "appsToAdd/appsToRemove wait-for-removal logic to prevent double-emplace" :status :missing)
      (:id 34 :desc "createUnfocusHackThread to unfocus after spawn when no focused app" :status :missing)
      (:id 35 :desc "Focus/unfocus calls to X11App::focus/unfocus (input shaping analog in Wayland)" :status :missing)
      (:id 36 :desc "Input capture/passthrough using XFixes shaping of overlay/matrix windows" :status :missing)
      (:id 37 :desc "Menu program configurable via WindowManager::menuProgram" :status :missing)
      (:id 38 :desc "forkOrFindApp logic to reuse existing process by class, with delays per app" :status :missing)
      (:id 39 :desc "Match bootable app to existing window by PID/class" :status :missing)
      (:id 40 :desc "Accessory window handling (skip focus hacks when accessory)" :status :missing)
      (:id 41 :desc "App select/highlight toggling in Space for window manager UI" :status :missing)
      (:id 42 :desc "Window flop-dependent view distance calculation (Space::getViewDistanceForWindowSize)" :status :missing)
      (:id 43 :desc "WM properties set on root (_NET_WM_CM_Sn, _NET_SUPPORTED hints)" :status :missing)
      (:id 44 :desc "MapRequest vs MapNotify handling differences (override_redirect detection)" :status :missing)
      (:id 45 :desc "ConfigureNotify resize propagation to app->resize()" :status :missing)
      (:id 46 :desc "Dynamic removal of hotkeys when app destroyed/unmapped" :status :missing)
      (:id 47 :desc "Spawn-at-camera option on first app add (space->addApp spawnAtCamera)" :status :missing)
      (:id 48 :desc "Space::toggleAppSelect integration with controls hotkeys" :status :missing)
      (:id 49 :desc "Camera moveTo callbacks restoring cursor grab after animations" :status :missing)
      (:id 50 :desc "Deferred queue for WM signals (X11 signal handler populates events) mirrored for Wayland events" :status :missing)
    )))
